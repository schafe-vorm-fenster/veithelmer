# Project Guidelines & Source of Truth

This document serves as the primary reference for all agents and developers working on the Veit Helmer digital archive project.

## 1. Project Overview
The goal is to modernize the digital archive of filmmaker Veit Helmer, migrating from legacy HTML/Flash to a modern, static, bilingual website.

## 2. Tech Stack
- **Static Site Generator:** Eleventy (11ty) v3.1+ (JavaScript-based)
- **Styling:** Tailwind CSS v4 (Utility-first, PostCSS)
- **Templating:** Nunjucks (`.njk`)
- **Animations:** GSAP (GreenSock) for Flash-like transitions
- **Build Tooling:** npm/pnpm scripts
- **Deployment:** GitHub Pages (via Actions)

## 3. Architecture & Conventions

### 3.1 File Structure
- **Content:** Markdown with Frontmatter.
- **Languages:** Dual-language support (`de` / `en`).
- **Assets:** Optimized images and modern video formats (MP4, H.264).

### 3.2 Localization Strategy
- **File Naming:**
  - German: `index_de.md`
  - English: `index_en.md`
- **Location:** Both files reside in the same directory: `/content/films/[film-slug]/`.
- **Routing:** `/de/` and `/en/` prefixes. Auto-redirect based on browser language preferred.

## 4. Content Architecture

### 4.1 Frontmatter Schema
All film content files must strictly follow this schema:

**Required Fields:**
| Field | Type | Description | Allowed Values |
| :--- | :--- | :--- | :--- |
| `title` | String | Official film title | - |
| `language` | String | `de` or `en` | - |
| `director` | String | Director's name | - |
| `cast` | List<String> | Primary cast members | - |
| `release_year` | Integer | Year of release | - |
| `duration` | Integer | Runtime in minutes | - |
| `category` | String | Production type | `Feature`, `Short`, `Commercial`, `Documentary` |
| `poster_image` | String | Relative path | e.g., `poster.jpg` |
| `trailer_video` | String | Relative path | e.g., `trailer.mp4` |

**Example:**
```yaml
---
title: "Absurdistan"
language: "en"
director: "Veit Helmer"
cast:
  - "Kristýna Malérová"
  - "Max Mauff"
release_year: 2008
duration: 88
category: "Feature"
poster_image: "poster.jpg"
trailer_video: "trailer.mp4"
---
```

## 5. Development Workflows

### 5.1 Flash Reconstruction
Legacy Flash sites must be visually preserved but technically rebuilt.
1.  **Decompile:** Use JPEXS to extract assets (Images, SVG shapes).
2.  **Reference:** Use Ruffle or Internet Archive to study original animations/interactions.
3.  **Implement:** Rebuild using HTML5, CSS Grid/Flexbox, and GSAP.

### 5.2 Media Processing
- **Video:** Convert all legacy `.flv` files to H.264 MP4.
  - Command: `ffmpeg -i input.flv -c:v libx264 -crf 23 -c:a aac output.mp4`
- **Images:** Use `eleventy-img` for responsive sizing and formats (WebP/AVIF).

## 6. Design System
- **Theme:** Minimalist. **Black background (#000000)**, **White text (#FFFFFF)**.
- **Typography:** Sans-serif, clean.
- **Layout:**
  - **Homepage:** "Streaming Service" grid style. Grouped by category.
  - **Detail Pages:** Hero image, metadata list, external links.

## 7. Operational Rules
- **Do NOT** use Client-Side Routing (SPA) unless necessary for specific transitions. Prefer Multi-Page App (MPA) structure.
- **Do NOT** use heavy JS frameworks (React/Vue). Stick to vanilla JS + 11ty.
- **Do** optimize assets aggressively (lazy loading, blur-up).